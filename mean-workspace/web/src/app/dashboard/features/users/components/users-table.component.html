<div class="table-container">
  <div class="table-header">
    <h2>Users Management</h2>
    <div class="search-container">
      <mat-form-field appearance="outline" class="search-field">
        <mat-label>Search users...</mat-label>
        <input matInput 
               [value]="filter"
               (input)="onFilterChange($event)"
               placeholder="Search by name, email, organization...">
        <mat-icon matSuffix>search</mat-icon>
      </mat-form-field>
    </div>
  </div>

  <div class="table-content">
    <table mat-table [dataSource]="dataSource" matSort class="full-width-table">
      <!-- Organization Name Column -->
      <ng-container matColumnDef="organizationName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Organization Name</th>
        <td mat-cell *matCellDef="let user">{{user.organizationName}}</td>
      </ng-container>

      <!-- First Name Column -->
      <ng-container matColumnDef="firstName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>First Name</th>
        <td mat-cell *matCellDef="let user">{{user.firstName}}</td>
      </ng-container>

      <!-- Last Name Column -->
      <ng-container matColumnDef="lastName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Last Name</th>
        <td mat-cell *matCellDef="let user">{{user.lastName}}</td>
      </ng-container>

      <!-- Email Column -->
      <ng-container matColumnDef="email">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Email</th>
        <td mat-cell *matCellDef="let user">{{user.email}}</td>
      </ng-container>

      <!-- Last Logged In Column -->
      <ng-container matColumnDef="lastLoggedIn">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Last Logged In</th>
        <td mat-cell *matCellDef="let user">{{user.lastLoggedIn | date:'short'}}</td>
      </ng-container>

      <!-- Status Column -->
      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Status</th>
        <td mat-cell *matCellDef="let user">
          <span class="status-badge" [ngClass]="getStatusClass(user.status)">
            {{user.status}}
          </span>
        </td>
      </ng-container>

      <!-- Organization Type Column -->
      <ng-container matColumnDef="organization">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Type</th>
        <td mat-cell *matCellDef="let user">
          <span class="org-badge" [ngClass]="getOrganizationClass(user.organization)">
            {{user.organization | titlecase}}
          </span>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </div>

  <div class="table-footer">
    <mat-paginator 
      [length]="total"
      [pageSize]="limit"
      [pageIndex]="page - 1"
      [pageSizeOptions]="[5, 10, 25, 50]"
      (page)="onPageChange($event)"
      showFirstLastButtons>
    </mat-paginator>
  </div>
</div>